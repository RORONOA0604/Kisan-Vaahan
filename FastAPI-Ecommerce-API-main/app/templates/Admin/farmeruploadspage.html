<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kisan Vaahan | Farmer Uploads</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'kisan-green': '#22C55E',
            'kisan-dark': '#047857',
            'kisan-light': '#D1FAE5',
          },
          boxShadow: {
            'custom-3d': '0 10px 15px -3px rgba(34,197,94,0.1), 0 4px 6px -2px rgba(34,197,94,0.05)',
            'card-lift': '0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.06)',
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gray-50 font-sans text-gray-800" style="zoom: 70%; overflow-x: hidden;">

  <!-- HEADER -->
    <header class="bg-white shadow-md sticky top-0 z-30">
    <div class="flex justify-between items-center px-10 md:px-4 py-2 max-w-8xl mx-auto">
      <div class="flex items-center space-x-5 cursor-pointer">
        <img src="logo.png"
             alt="Kisan Vaahan Logo"
             class="h-24 w-24 object-contain transform hover:rotate-12 transition-transform duration-400" />
        <h1 class="text-4xl font-extrabold text-kisan-dark tracking-tight leading-none transform hover:scale-105 transition-transform duration-300">
          KISAN VAAHAN
        </h1>
      </div>

      <nav class="space-x-8 font-semibold text-2xl">
        <a href="marketplace.html" class="text-kisan-dark hover:text-kisan-green transition duration-300">Marketplace</a>
      </nav>
    </div>
  </header>

  <!-- MAIN BODY -->
<div class="flex flex-1">

    <!-- SIDEBAR -->
    <aside class="w-64 bg-kisan-light border-r border-gray-200 p-6 flex flex-col justify-between">
      <div>
        <div class="mb-8 text-center">
          <img src="image.png" class="mx-auto h-16 w-16 rounded-full border-4 border-kisan-green" alt="Admin" />
          <h2 class="text-xl font-bold text-kisan-dark mt-2">Admin Panel</h2>
        </div>

        <nav class="space-y-10 font-semibold text-gray-700">
          <a href="admindashboardpage.html" class="flex items-center space-x-2 hover:text-kisan-green text-2xl">
            <span>Dashboard</span>
          </a>
          <a href="productspage.html" class="flex items-center space-x-2 hover:text-kisan-green text-2xl">
            <span>Products</span>
          </a>
          <a href="farmeruploads.html" class="flex items-center space-x-2 shadow p-3 rounded-lg border-l-4 border-kisan-green text-2xl">
            <span>Farmer Uploads</span>
          </a>
          <a href="orderspage.html" class="flex items-center space-x-2 hover:text-kisan-green text-2xl">
            <span>Orders</span>
          </a>
          <a href="paymentpage.html" class="flex items-center space-x-2 hover:text-kisan-green text-2xl">
            <span>Payments</span>
          </a>
        </nav>
      </div>

          <button onclick="window.location.href='landingpage.html'" class="bg-red-500 text-white px-4 py-2 rounded-lg font-semibold mt-6">Log Out</button>

    </aside>

    <!-- MAIN CONTENT -->
    <main class="flex-1 p-10">
      <div class="flex justify-between items-center mb-8">
        <div>
          <h2 class="text-4xl font-extrabold text-kisan-dark">Farmer Product Uploads</h2>
          <p class="text-gray-600 text-lg">View, manage, or delete farmer-uploaded products</p>
        </div>
      </div>

      <!-- PRODUCT TABLE -->
      <section class="bg-white rounded-2xl p-10 shadow-xl mt-8 border border-gray-200">
        <div class="flex justify-between items-center mb-6">
          <h3 class="text-3xl font-extrabold text-kisan-dark tracking-tight">
            Uploaded Products
          </h3>
          <span id="uploadCount" class="text-lg font-semibold text-gray-500"></span>
        </div>

        <div class="overflow-x-auto rounded-xl border border-gray-200">
          <table class="min-w-full text-left text-lg">
            <thead class="bg-kisan-light text-kisan-dark uppercase tracking-wide font-semibold">
              <tr>
                <th class="p-4 border text-center w-56">Image</th>
                <th class="p-4 border">Product Name</th>
                <th class="p-4 border">Category</th>
                <th class="p-4 border">Farmer Name</th>
                <th class="p-4 border">Phone</th>
                <th class="p-4 border text-center">Actions</th>
              </tr>
            </thead>
            <tbody id="uploadTable" class="text-gray-800 text-lg"></tbody>
          </table>
        </div>
      </section>
    </main>
  </div>

  <!-- FOOTER -->
  <footer class="bg-kisan-dark text-white py-8 text-center">
    <p class="text-lg">Â© 2025 Kisan Vaahan. All rights reserved.</p>
  </footer>

  <!-- DELETE CONFIRM POPUP -->
  <div id="confirmDelete"
       class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-50">
    <div class="bg-white p-6 rounded-2xl shadow-lg text-center w-96">
      <h3 class="text-2xl font-bold text-kisan-dark mb-3">Delete Farmer Upload?</h3>
      <p class="text-gray-600 mb-5">Are you sure you want to remove this farmerâ€™s upload?</p>

      <div class="flex justify-center gap-4">
        <button onclick="cancelDelete()" class="px-4 py-2 border rounded-lg hover:bg-gray-100">Cancel</button>
        <button id="confirmDeleteBtn" class="px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700">Delete</button>
      </div>
    </div>
  </div>

  <!-- JAVASCRIPT -->
  <script>
    const table = document.getElementById("uploadTable");
    let uploads = JSON.parse(localStorage.getItem("farmerUploads")) || [];
    let deleteIndex = null;

    // âœ… Load Uploads
    function loadUploads() {
      table.innerHTML = "";
      document.getElementById("uploadCount").textContent = `Total Uploads: ${uploads.length}`;

      if (uploads.length === 0) {
        table.innerHTML = `<tr><td colspan="6" class="text-center p-5 text-gray-500">No farmer uploads found ðŸŒ¾</td></tr>`;
        return;
      }

      uploads.forEach((p, i) => {
        table.innerHTML += `
          <tr class="border-t hover:bg-gray-50 transition-all duration-300 hover:shadow-md">
            <td class="p-4 border text-center">
              <img src="${p.image}" alt="${p.name}" class="w-52 h-44 object-cover rounded-xl mx-auto border border-gray-200 shadow-sm">
            </td>
            <td class="p-4 border font-semibold text-gray-800 text-2xl">${p.name}</td>
            <td class="p-4 border text-gray-700">${p.category}</td>
            <td class="p-4 border">${p.farmer}</td>
            <td class="p-4 border">${p.phone}</td>
            <td class="p-4 border text-center">
              <button onclick="viewDetails(${i})"
                      class="bg-kisan-green text-white px-4 py-2 rounded-lg font-semibold hover:bg-kisan-dark transition shadow-md mr-3">
                View
              </button>
              <button onclick="confirmDeleteProduct(${i})"
                      class="bg-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-700 transition shadow-md">
                Delete
              </button>
            </td>
          </tr>`;
      });
    }

    // âœ… View Product Details
    function viewDetails(index) {
      localStorage.setItem("selectedFarmerProduct", JSON.stringify(uploads[index]));
      window.location.href = "viewproductpage.html";
    }

    // âœ… Confirm Delete
    function confirmDeleteProduct(index) {
      deleteIndex = index;
      document.getElementById("confirmDelete").classList.remove("hidden");
    }

    function cancelDelete() {
      document.getElementById("confirmDelete").classList.add("hidden");
    }

    // âœ… Delete Product
    document.getElementById("confirmDeleteBtn").addEventListener("click", () => {
      if (deleteIndex !== null) {
        uploads.splice(deleteIndex, 1);
        localStorage.setItem("farmerUploads", JSON.stringify(uploads));
        deleteIndex = null;
        cancelDelete();
        loadUploads();
      }
    });

    // âœ… Initial Load
    loadUploads();
  </script>

</body>
</html>
